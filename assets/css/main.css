:root {
      --fa-font: 'Segoe UI', 'Frutiger', 'Inter', system-ui, -apple-system, sans-serif;
      --fa-text: #e8f6ff;
      --fa-muted: #b8d6f3;
      --fa-border: rgba(129, 203, 255, 0.45);
      --fa-strong-border: rgba(129, 203, 255, 0.75);
      --fa-panel: linear-gradient(160deg, rgba(255, 255, 255, 0.08), rgba(62, 142, 206, 0.18));
      --fa-panel-strong: linear-gradient(160deg, rgba(255, 255, 255, 0.10), rgba(36, 111, 185, 0.26));
      --fa-glow: 0 18px 44px rgba(5, 32, 74, 0.55);
      --fa-accent: #6ddcff;
      --fa-accent-2: #3aa1ff;
      --fa-surface-dark: rgba(9, 18, 38, 0.8);
      --fa-surface-gloss: linear-gradient(180deg, rgba(255, 255, 255, 0.08), rgba(255, 255, 255, 0));
    }

    html,
    body {
      height: 100%;
      margin: 0;
      background: linear-gradient(135deg, #000000 0%, #080808 40%, #111111 100%);
      color: var(--fa-text);
      font-family: var(--fa-font)
    }

    body,
    button,
    input,
    select,
    option {
      font-family: var(--fa-font);
    }

    body::before {
      content: '';
      position: fixed;
      inset: 0;
      pointer-events: none;
      background: radial-gradient(circle at 50% 30%, rgba(255, 255, 255, 0.05), transparent 35%);
      mix-blend-mode: screen;
      opacity: 0.8;
      z-index: 1
    }

    .hud-topbar {
      position: fixed;
      bottom: calc(14px + env(safe-area-inset-bottom));
      left: 50%;
      transform: translateX(-50%);
      z-index: 120;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 10px 12px;
      border-radius: 16px;
      border: 1px solid var(--fa-border);
      background: var(--fa-panel-strong);
      backdrop-filter: blur(14px);
      box-shadow: var(--fa-glow);
      min-width: 360px;
      max-width: 560px;
    }

    .hud-topbar .skill-slot-row {
      display: grid;
      grid-template-columns: repeat(10, minmax(36px, 1fr));
      gap: 8px;
    }

    .hud-topbar .skill-slot {
      position: relative;
      height: 42px;
      border-radius: 12px;
      border: 1px solid var(--fa-border);
      background: var(--fa-panel);
      box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.12), 0 12px 22px rgba(5, 32, 74, 0.45);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 13px;
      font-weight: 800;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      color: #e8f6ff;
      text-shadow: 0 0 14px rgba(109, 220, 255, 0.55);
    }

    .hud-topbar .skill-slot::after {
      content: '';
      position: absolute;
      inset: 0;
      background: var(--fa-surface-gloss);
      border-radius: inherit;
      opacity: 0.65;
      pointer-events: none;
    }

    .hud-topbar {
      pointer-events: none;
    }

    .hud-topbar .skill-slot {
      pointer-events: none;
    }

    #ui {
      position: absolute;
      left: 12px;
      top: 12px;
      z-index: 120;
      background: var(--fa-panel);
      padding: 12px 14px;
      border-radius: 12px;
      backdrop-filter: blur(10px);
      border: 1px solid var(--fa-border);
      box-shadow: var(--fa-glow)
    }

    #side-panels {
      position: absolute;
      left: 12px;
      top: 160px;
      z-index: 120;
      display: flex;
      flex-direction: column;
      gap: 12px;
      align-items: flex-start;
    }

    .side-panel {
      width: 280px;
      display: flex;
      flex-direction: column;
      gap: 10px;
      background: var(--fa-panel-strong);
      padding: 14px 16px;
      border-radius: 14px;
      border: 1px solid var(--fa-border);
      backdrop-filter: blur(10px);
      color: var(--fa-text);
      font-family: var(--fa-font);
      box-shadow: var(--fa-glow);
      transition: width 0.32s ease, padding 0.32s ease, gap 0.24s ease, min-height 0.24s ease;
      align-items: flex-start;
    }

    .side-panel.hidden {
      display: none !important;
    }

    .panel-toggle {
      display: flex;
      align-items: center;
      gap: 10px;
      margin: 0;
      padding: 0;
      border: none;
      background: transparent;
      color: #aee3ff;
      font-size: 15px;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      text-shadow: 0 0 12px rgba(99, 208, 255, 0.45);
      cursor: pointer;
      transition: color 0.22s ease, transform 0.22s ease;
      justify-content: flex-start;
    }

    .panel-toggle:active {
      transform: translateY(1px);
    }

    .panel-chevron {
      margin-left: auto;
      font-size: 14px;
      color: var(--fa-muted);
      opacity: 0.85;
      transition: transform 0.28s ease, opacity 0.2s ease;
    }

    .side-panel-title {
      margin: 0;
      font-size: 15px;
      font-weight: 700;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      color: #aee3ff;
      text-shadow: 0 0 12px rgba(99, 208, 255, 0.45);
      display: inline-block;
      transform-origin: left center;
      transition: transform 0.35s ease, letter-spacing 0.24s ease, opacity 0.24s ease;
    }

    .side-panel-body {
      list-style: none;
      margin: 0;
      padding: 0;
      display: flex;
      flex-direction: column;
      gap: 10px;
      max-height: 1200px;
      opacity: 1;
      transform: translateY(0);
      transition: max-height 0.32s ease, opacity 0.24s ease, transform 0.24s ease;
    }

    .side-panel.collapsed {
      width: 48px;
      padding: 8px 6px;
      gap: 4px;
      align-items: center;
      min-height: auto;
    }

    .side-panel.collapsed .panel-toggle {
      justify-content: center;
      min-height: auto;
      padding: 4px 0;
    }

    .side-panel.collapsed .side-panel-title {
      transform: rotate(-90deg);
      letter-spacing: 0.16em;
      transform-origin: center center;
      text-align: center;
    }

    .side-panel.collapsed .panel-chevron {
      opacity: 0;
      transform: translateY(-4px);
    }

    .side-panel.collapsed .side-panel-body {
      max-height: 0;
      opacity: 0;
      transform: translateY(-8px);
      pointer-events: none;
    }

    #fleet-ui .side-panel-body {
      max-height: 360px;
      overflow-y: auto;
      -ms-overflow-style: none;
      scrollbar-width: none;
    }

    #fleet-ui .side-panel-body::-webkit-scrollbar {
      display: none;
    }

    #fleet-list {
      list-style: none;
      margin: 0;
      padding: 0;
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .fleet-ship {
      padding: 10px 12px;
      background: linear-gradient(160deg, rgba(10, 26, 48, 0.82), rgba(12, 32, 58, 0.9));
      border: 1px solid var(--fa-border);
      border-radius: 12px;
      display: flex;
      flex-direction: column;
      gap: 8px;
      box-shadow: 0 10px 24px rgba(0, 0, 0, 0.35)
    }

    .fleet-ship-header {
      display: flex;
      flex-direction: column;
      gap: 2px;
    }

    .fleet-ship-name {
      font-weight: 700;
      font-size: 15px;
      color: #f6fbff;
      letter-spacing: 0.02em;
    }

    .fleet-ship-meta {
      font-size: 11px;
      letter-spacing: 0.12em;
      text-transform: uppercase;
      color: var(--fa-muted);
    }

    .fleet-stats {
      font-size: 13px;
      letter-spacing: 0.04em;
      color: #dfe7ff;
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
      align-items: center;
    }

    .fleet-fighters {
      font-size: 13px;
      font-weight: 700;
      color: var(--fa-text);
      text-shadow: 0 0 8px rgba(109, 220, 255, 0.45);
      letter-spacing: 0.04em;
    }

    .fleet-hardpoints {
      display: flex;
      gap: 8px;
      font-size: 11px;
      color: #cde7ff;
      flex-wrap: wrap;
    }

    .fleet-hardpoints span {
      padding: 2px 8px;
      border-radius: 999px;
      background: rgba(99, 167, 238, 0.2);
      border: 1px solid var(--fa-border);
      box-shadow: 0 6px 16px rgba(0, 0, 0, 0.25);
    }

    .fleet-controls {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-top: 6px;
    }

    .fleet-order-btn {
      flex: 1 1 30%;
      padding: 8px 9px;
      border-radius: 10px;
      border: 1px solid var(--fa-border);
      background: linear-gradient(150deg, rgba(66, 142, 210, 0.25), rgba(55, 116, 186, 0.35));
      color: var(--fa-text);
      font-size: 11px;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      cursor: pointer;
      transition: background 0.18s ease, border-color 0.18s ease, color 0.18s ease, transform 0.18s ease;
      box-shadow: 0 10px 20px rgba(0, 0, 0, 0.22);
    }

    .fleet-order-btn:hover {
      background: linear-gradient(150deg, rgba(96, 188, 255, 0.35), rgba(55, 116, 186, 0.45));
      border-color: var(--fa-strong-border);
      transform: translateY(-1px);
    }

    .fleet-order-btn.active {
      background: linear-gradient(150deg, rgba(109, 220, 255, 0.4), rgba(58, 161, 255, 0.42));
      border-color: var(--fa-strong-border);
      color: #f1f7ff;
      box-shadow: 0 0 0 1px rgba(96, 165, 250, 0.35) inset, 0 12px 26px rgba(3, 92, 160, 0.35);
    }

    #support-ui {
      width: 280px;
    }

    .support-row {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
    }

    .support-btn {
      flex: 1 1 48%;
      padding: 9px 11px;
      border-radius: 10px;
      border: 1px solid var(--fa-border);
      background: linear-gradient(150deg, rgba(66, 142, 210, 0.25), rgba(55, 116, 186, 0.35));
      color: var(--fa-text);
      font-size: 12px;
      letter-spacing: 0.06em;
      text-transform: uppercase;
      cursor: pointer;
      transition: background 0.18s ease, border-color 0.18s ease, color 0.18s ease, transform 0.18s ease;
      box-shadow: 0 10px 20px rgba(0, 0, 0, 0.22);
    }

    .support-btn:hover {
      background: linear-gradient(150deg, rgba(96, 188, 255, 0.35), rgba(55, 116, 186, 0.45));
      border-color: var(--fa-strong-border);
      transform: translateY(-1px);
    }

    .support-order-btn {
      flex: 1 1 48%;
      padding: 9px 11px;
      border-radius: 10px;
      border: 1px solid var(--fa-border);
      background: linear-gradient(150deg, rgba(66, 142, 210, 0.28), rgba(55, 116, 186, 0.38));
      color: var(--fa-text);
      font-size: 12px;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      cursor: pointer;
      transition: background 0.18s ease, border-color 0.18s ease, color 0.18s ease, transform 0.18s ease;
      box-shadow: 0 12px 24px rgba(0, 0, 0, 0.25);
    }

    .support-order-btn.active {
      background: linear-gradient(150deg, rgba(109, 220, 255, 0.4), rgba(58, 161, 255, 0.42));
      border-color: var(--fa-strong-border);
      color: #f1f7ff;
      box-shadow: 0 0 0 1px rgba(96, 165, 250, 0.35) inset, 0 12px 26px rgba(3, 92, 160, 0.35);
    }

    canvas {
      display: block;
      width: 100vw;
      height: 100vh
    }

    #game-root {
      position: relative;
      width: 100vw;
      height: 100vh;
    }

    #game-root>canvas {
      display: block;
      width: 100%;
      height: 100%;
    }

    #c {
      position: relative;
      z-index: 10;
    }

    /* nie obejmuj overlayu 3D */
    canvas:not(#c):not(.overlay3d) {
      pointer-events: none !important;
      position: absolute;
      inset: 0;
      z-index: 0;
    }

    .stat {
      font-family: monospace;
      font-size: 13px
    }

    small {
      color: #a8b4d9
    }

    /* --- MENU STYLES (ENHANCED) --- */
    #main-menu {
      position: fixed;
      inset: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      background: radial-gradient(circle at 50% 50%, rgba(10, 20, 40, 0.3), rgba(0, 0, 0, 0.95));
      perspective: 1200px;
      overflow: hidden;
      z-index: 9999;
      transition: opacity 0.8s ease, backdrop-filter 0.8s ease;
    }

    #main-menu.hidden {
      opacity: 0;
      pointer-events: none;
    }

    .menu-perspective-wrapper {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 30px;
      transform: rotateX(20deg) translateY(-30px);
      transform-style: preserve-3d;
      transform-origin: center center;
      animation: menu-crawl-enter 2.2s cubic-bezier(0.19, 1, 0.22, 1) forwards;
      opacity: 0;
      pointer-events: auto;
    }

    @keyframes menu-crawl-enter {
      0% {
        opacity: 0;
        transform: rotateX(45deg) translateY(120vh) scale(1.5);
      }
      100% {
        opacity: 1;
        transform: rotateX(20deg) translateY(-30px) scale(1);
      }
    }

    .sc-logo-container {
      text-align: center;
      margin-bottom: 20px;
      transform: translateZ(60px);
      pointer-events: none;
    }

    .sc-main-title {
      font-size: 100px;
      font-weight: 900;
      margin: 0;
      line-height: 0.9;
      letter-spacing: 0.02em;
      text-transform: uppercase;
      background: linear-gradient(120deg, #ffffff 0%, #ffffff 40%, #89caff 50%, #ffffff 60%, #ffffff 100%);
      background-size: 250% auto;
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      filter: drop-shadow(0 0 35px rgba(74, 144, 226, 0.5));
      animation: shine 5s linear infinite;
    }

    @keyframes shine {
      0% {
        background-position: 250% center;
      }
      100% {
        background-position: -50% center;
      }
    }

    .sc-subtitle {
      font-size: 24px;
      color: #7abaff;
      letter-spacing: 0.6em;
      text-transform: uppercase;
      margin-top: 10px;
      text-shadow: 0 0 15px rgba(122, 186, 255, 0.8);
      font-weight: 600;
      opacity: 0.9;
    }

    .menu-glass-panel {
      width: 480px;
      padding: 50px 40px;
      background: linear-gradient(180deg, rgba(20, 30, 50, 0.75), rgba(8, 12, 20, 0.92));
      border: 1px solid rgba(100, 180, 255, 0.3);
      border-radius: 4px;
      box-shadow: 0 0 40px rgba(0, 0, 0, 0.6), inset 0 0 30px rgba(60, 120, 200, 0.15);
      backdrop-filter: blur(6px);
      position: relative;
      -webkit-box-reflect: below 10px linear-gradient(to bottom, rgba(0, 0, 0, 0) 0%, rgba(0, 0, 0, 0.15) 100%);
      pointer-events: auto;
      overflow: hidden;
    }

    .menu-glass-panel::before {
      content: '';
      position: absolute;
      inset: 0;
      background: repeating-linear-gradient(
        to bottom,
        transparent 0px,
        transparent 2px,
        rgba(100, 200, 255, 0.03) 3px
      );
      pointer-events: none;
      z-index: 0;
    }

    .menu-glass-panel::after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 2px;
      background: linear-gradient(90deg, transparent 0%, #5eaadd 50%, transparent 100%);
      opacity: 0.7;
    }

    .menu-sub-view {
      display: none;
      flex-direction: column;
      gap: 18px;
      position: relative;
      z-index: 1;
    }

    .menu-sub-view.active {
      display: flex;
    }

    .menu-btn-styled {
      background: rgba(30, 50, 80, 0.6);
      border: 1px solid rgba(80, 140, 220, 0.3);
      color: #d0eeff;
      padding: 18px 24px;
      font-size: 20px;
      font-weight: 700;
      letter-spacing: 0.15em;
      text-transform: uppercase;
      cursor: pointer;
      transition: all 0.25s cubic-bezier(0.2, 0.8, 0.2, 1);
      display: flex;
      justify-content: space-between;
      align-items: center;
      position: relative;
      overflow: hidden;
    }

    .menu-btn-styled::before {
      content: '';
      position: absolute;
      left: 0;
      top: 0;
      bottom: 0;
      width: 4px;
      background: #7dd3fc;
      transform: scaleY(0);
      transition: transform 0.2s ease;
    }

    .menu-btn-styled:hover:not(:disabled) {
      background: rgba(50, 90, 150, 0.8);
      border-color: #7dd3fc;
      color: #fff;
      transform: translateX(5px);
      box-shadow: 0 0 25px rgba(60, 130, 200, 0.4);
      padding-left: 32px;
    }

    .menu-btn-styled:hover:not(:disabled)::before {
      transform: scaleY(1);
    }

    .menu-btn-styled.primary {
      background: linear-gradient(90deg, rgba(40, 100, 200, 0.6), rgba(20, 60, 120, 0.6));
      border: 1px solid #7dd3fc;
      box-shadow: 0 0 15px rgba(40, 100, 200, 0.2);
    }

    .menu-btn-styled:disabled {
      opacity: 0.3;
      cursor: not-allowed;
      filter: grayscale(1);
    }

    .menu-footer {
      margin-top: 60px;
      font-size: 14px;
      color: #5eaadd;
      opacity: 0.5;
      text-transform: uppercase;
      letter-spacing: 0.2em;
      transform: translateZ(20px);
      text-shadow: 0 0 5px rgba(94, 170, 221, 0.5);
    }

    .credits-text {
      color: #b8d6f3;
      text-align: center;
      line-height: 1.8;
      font-size: 16px;
    }

    .menu-options-grid {
      display: flex;
      flex-direction: column;
      gap: 20px;
    }

    .menu-chip-group {
      display: flex;
      gap: 10px;
      justify-content: flex-start;
    }

    .menu-chip {
      padding: 8px 16px;
      background: rgba(255, 255, 255, 0.05);
      border: 1px solid rgba(255, 255, 255, 0.2);
      color: #ccc;
      cursor: pointer;
      transition: 0.2s;
      font-weight: 600;
      font-size: 13px;
      text-transform: uppercase;
    }

    .menu-chip:hover {
      background: rgba(255, 255, 255, 0.1);
      border-color: rgba(255, 255, 255, 0.4);
    }

    .menu-chip.active {
      background: #3aa1ff;
      color: #000;
      box-shadow: 0 0 15px rgba(58, 161, 255, 0.6);
      border-color: #3aa1ff;
    }

    .menu-section {
      border-bottom: 1px solid rgba(255, 255, 255, 0.08);
      padding-bottom: 15px;
      margin-bottom: 5px;
    }

    .menu-section:last-child {
      border-bottom: none;
      margin-bottom: 0;
      padding-bottom: 0;
    }

    .menu-section-title {
      font-size: 14px;
      color: #5eaadd;
      font-weight: 700;
      letter-spacing: 0.15em;
      text-transform: uppercase;
      margin-bottom: 12px;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .menu-section-title::after {
      content: '';
      flex: 1;
      height: 1px;
      background: linear-gradient(90deg, rgba(94, 170, 221, 0.3) 0%, transparent 100%);
    }

    .menu-empty-placeholder {
      font-size: 12px;
      color: rgba(255, 255, 255, 0.3);
      font-style: italic;
      padding: 5px 0;
    }

    .option-slider-row {
      display: flex;
      flex-direction: column;
      gap: 6px;
      margin-bottom: 12px;
    }

    .option-slider-row:last-child {
      margin-bottom: 0;
    }

    .option-slider-label {
      font-size: 12px;
      color: #a2d9ff;
      text-transform: uppercase;
      letter-spacing: 1px;
      display: flex;
      justify-content: space-between;
    }

    .option-slider {
      -webkit-appearance: none;
      width: 100%;
      height: 6px;
      background: rgba(255, 255, 255, 0.1);
      border-radius: 3px;
      outline: none;
    }

    .option-slider::-webkit-slider-thumb {
      -webkit-appearance: none;
      width: 16px;
      height: 16px;
      background: #3aa1ff;
      border-radius: 50%;
      cursor: pointer;
      box-shadow: 0 0 10px #3aa1ff;
      transition: transform 0.1s;
    }

    .option-slider::-webkit-slider-thumb:hover {
      transform: scale(1.2);
    }

    #loading {
      position: fixed;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
      background: radial-gradient(circle at 40% 30%, rgba(77, 190, 255, 0.12), rgba(3, 4, 23, 0.94));
      z-index: 300;
      color: var(--fa-text);
      font-family: var(--fa-font);
      padding: 20px;
    }

    .loading-box {
      width: min(380px, calc(100% - 24px));
      background: var(--fa-panel-strong);
      border: 1px solid var(--fa-border);
      border-radius: 16px;
      padding: 24px 26px;
      box-shadow: var(--fa-glow);
      display: flex;
      flex-direction: column;
      gap: 12px;
      position: relative;
      overflow: hidden;
    }

    .loading-box::after {
      content: '';
      position: absolute;
      inset: 0;
      background: var(--fa-surface-gloss);
      pointer-events: none;
    }

    .loading-title {
      font-size: 18px;
      letter-spacing: 0.1em;
      text-transform: uppercase;
      color: #c1e8ff;
      margin: 0;
      text-shadow: 0 0 18px rgba(109, 220, 255, 0.6);
    }

    .loading-bar {
      position: relative;
      width: 100%;
      height: 12px;
      border-radius: 999px;
      background: rgba(28, 50, 92, 0.9);
      overflow: hidden;
      border: 1px solid var(--fa-border);
      box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.08);
    }

    .loading-bar span {
      position: absolute;
      left: 0;
      top: 0;
      height: 100%;
      width: 0;
      background: linear-gradient(90deg, #6ddcff, #3aa1ff);
      box-shadow: 0 8px 18px rgba(61, 179, 255, 0.35);
      transition: width 0.18s ease-out;
    }

    .loading-progress {
      font-size: 14px;
      color: #dff2ff;
      letter-spacing: 0.08em;
      text-transform: uppercase;
    }

    .hidden {
      display: none !important;
    }

    .station-overlay {
      position: absolute;
      top: 60px;
      right: 40px;
      max-width: 840px;
      width: min(840px, calc(100vw - 80px));
      min-width: 540px;
      max-height: 80vh;
      overflow: hidden;
      overflow-y: auto;
      padding: 18px 20px;
      background: radial-gradient(circle at 18% 18%, rgba(109, 220, 255, 0.14), transparent 32%), var(--fa-panel-strong);
      border: 1px solid var(--fa-border);
      border-radius: 16px;
      z-index: 60;
      color: var(--fa-text);
      font-family: var(--fa-font);
      backdrop-filter: blur(14px);
      box-shadow: 0 22px 44px rgba(5, 32, 74, 0.55);
    }

    .station-overlay::after {
      content: "";
      position: absolute;
      inset: 0;
      background: var(--fa-surface-gloss);
      pointer-events: none;
      border-radius: inherit;
      opacity: 0.9;
    }

    .station-overlay h3 {
      position: relative;
      z-index: 1;
      margin: 0 0 12px 0;
      font-size: 18px;
      letter-spacing: 0.06em;
      text-transform: uppercase;
      color: #c1e8ff;
      text-shadow: 0 0 12px rgba(109, 220, 255, 0.45);
    }

    .station-overlay ul {
      position: relative;
      z-index: 1;
      list-style: none;
      padding: 0;
      margin: 0 0 12px 0;
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
      align-items: stretch;
    }

    .station-overlay li {
      padding: 9px 16px;
      border: 1px solid var(--fa-border);
      border-radius: 12px;
      background: linear-gradient(150deg, rgba(66, 142, 210, 0.28), rgba(55, 116, 186, 0.46));
      cursor: pointer;
      color: var(--fa-text);
      font-size: 14px;
      transition: background 0.2s, border-color 0.2s, color 0.2s, transform 0.18s ease;
      flex: 1 1 42%;
      text-align: center;
      min-width: 128px;
      box-shadow: 0 14px 22px rgba(0, 0, 0, 0.26);
      backdrop-filter: blur(6px);
    }

    .station-overlay li:hover {
      background: linear-gradient(150deg, rgba(96, 188, 255, 0.42), rgba(55, 116, 186, 0.54));
      border-color: var(--fa-strong-border);
      color: #e6f8ff;
      transform: translateY(-1px);
    }

    .station-overlay li.active {
      background: linear-gradient(150deg, rgba(109, 220, 255, 0.5), rgba(58, 161, 255, 0.56));
      border-color: var(--fa-strong-border);
      color: #041226;
      box-shadow: 0 0 0 1px rgba(96, 165, 250, 0.35) inset, 0 12px 26px rgba(3, 92, 160, 0.35);
    }

    .station-tab.hidden {
      display: none;
    }

    .station-head {
      position: relative;
      z-index: 1;
      display: flex;
      justify-content: space-between;
      gap: 12px;
      align-items: flex-start;
      margin-bottom: 12px;
    }

    .station-title {
      margin: 0;
      font-size: 20px;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      color: #e6f8ff;
      text-shadow: 0 0 14px rgba(109, 220, 255, 0.55);
    }

    .station-subtitle {
      margin: 2px 0 0 0;
      font-size: 12px;
      letter-spacing: 0.16em;
      text-transform: uppercase;
      color: var(--fa-muted);
    }

    .station-balance {
      display: flex;
      flex-direction: column;
      gap: 2px;
      padding: 10px 12px;
      border-radius: 12px;
      background: rgba(8, 18, 36, 0.85);
      border: 1px solid rgba(109, 220, 255, 0.35);
      box-shadow: 0 12px 26px rgba(3, 12, 32, 0.5);
    }

    .station-balance .label {
      font-size: 11px;
      letter-spacing: 0.14em;
      text-transform: uppercase;
      color: #8fb5ff;
    }

    .station-balance .value {
      font-size: 18px;
      font-weight: 800;
      color: #f8fbff;
      letter-spacing: 0.04em;
    }

    .station-panels {
      position: relative;
      z-index: 1;
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .station-tab {
      display: none;
      flex-direction: column;
      gap: 12px;
    }

    .station-tab.active {
      display: flex;
    }

    .station-card {
      padding: 12px 14px;
      border-radius: 12px;
      background: linear-gradient(170deg, rgba(9, 16, 32, 0.92), rgba(12, 26, 46, 0.95));
      border: 1px solid rgba(34, 60, 104, 0.85);
      box-shadow: 0 14px 26px rgba(0, 0, 0, 0.32);
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .station-card-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 8px;
    }

    .station-card-title {
      margin: 0;
      font-size: 15px;
      font-weight: 800;
      letter-spacing: 0.04em;
      color: #e6f8ff;
    }

    .station-chip {
      padding: 4px 10px;
      border-radius: 999px;
      background: rgba(63, 88, 144, 0.32);
      border: 1px solid rgba(96, 165, 250, 0.4);
      color: #dfe7ff;
      font-size: 11px;
      letter-spacing: 0.08em;
      text-transform: uppercase;
    }

    .station-card-desc {
      margin: 0;
      color: #cbd5ff;
      font-size: 13px;
      line-height: 1.5;
    }

    .station-card-meta {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      font-size: 12px;
      color: #9fb4e6;
    }

    .station-card-actions {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      align-items: center;
    }

    .station-card button {
      padding: 8px 12px;
      border-radius: 10px;
      border: 1px solid var(--fa-border);
      background: linear-gradient(150deg, rgba(66, 142, 210, 0.28), rgba(55, 116, 186, 0.42));
      color: var(--fa-text);
      font-weight: 700;
      letter-spacing: 0.06em;
      text-transform: uppercase;
      cursor: pointer;
      transition: background 0.18s, border-color 0.18s, transform 0.18s;
      box-shadow: 0 12px 22px rgba(0, 0, 0, 0.28);
    }

    .station-card button:hover:not(:disabled) {
      background: linear-gradient(150deg, rgba(96, 188, 255, 0.38), rgba(55, 116, 186, 0.5));
      border-color: var(--fa-strong-border);
      transform: translateY(-1px);
    }

    .station-card button:disabled {
      opacity: 0.45;
      cursor: not-allowed;
    }

    .station-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
      gap: 12px;
    }

    .station-divider {
      height: 1px;
      background: linear-gradient(90deg, rgba(109, 220, 255, 0), rgba(109, 220, 255, 0.45), rgba(109, 220, 255, 0));
      margin: 4px 0;
    }

    .trade-resource-card .station-card-meta {
      margin-top: -4px;
    }

    .trade-resource-note {
      display: block;
      font-size: 12px;
      color: #9fb4e6;
      margin-top: -2px;
    }

    .trade-resource-table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 6px;
    }

    .trade-resource-table td {
      padding: 6px 4px;
      font-size: 13px;
      color: #dfe7ff;
    }

    .trade-resource-table tr+tr td {
      border-top: 1px solid rgba(70, 94, 140, 0.4);
    }

    .trade-resource-label {
      display: flex;
      align-items: center;
      gap: 8px;
      font-weight: 700;
      letter-spacing: 0.03em;
    }

    .trade-resource-values {
      white-space: nowrap;
      text-align: right;
      font-variant-numeric: tabular-nums;
    }

    .trade-resource-amount {
      color: #e6f8ff;
      font-weight: 800;
    }

    .trade-resource-capacity {
      color: #9fb4e6;
      font-size: 12px;
    }

    .resource-icon-wrap {
      width: 22px;
      height: 22px;
      display: grid;
      place-items: center;
      background: rgba(24, 36, 66, 0.85);
      border: 1px solid rgba(96, 165, 250, 0.25);
      border-radius: 8px;
      box-shadow: 0 6px 14px rgba(0, 0, 0, 0.32);
    }

    .resource-icon {
      width: 16px;
      height: 16px;
      display: block;
    }

    .mechanic-toolbar {
      position: relative;
      z-index: 1;
      display: flex;
      align-items: center;
      gap: 8px;
      margin-bottom: 14px;
    }

    .mechanic-toolbar label {
      font-weight: 700;
      letter-spacing: 0.05em;
      color: #b8c9f3;
      text-transform: uppercase;
      font-size: 12px;
    }

    .mechanic-toolbar select {
      flex: 1;
      background: linear-gradient(135deg, rgba(6, 14, 28, 0.92), rgba(8, 16, 34, 0.95));
      color: #dfe7ff;
      border: 1px solid #2a3a5a;
      border-radius: 10px;
      padding: 7px 12px;
      font-size: 14px;
      box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.08);
    }

    .mechanic-body {
      display: grid;
      grid-template-columns: 1fr 1.2fr;
      gap: 16px;
      align-items: flex-start;
    }

    .mechanic-column {
      display: flex;
      flex-direction: column;
      gap: 12px;
      min-width: 0;
    }

    .mechanic-section {
      background: linear-gradient(170deg, rgba(9, 16, 32, 0.92), rgba(10, 22, 42, 0.95));
      border: 1px solid #1f2c49;
      border-radius: 12px;
      padding: 12px;
      box-shadow: 0 12px 22px rgba(0, 0, 0, 0.32);
      position: relative;
      z-index: 1;
    }

    .mechanic-section-head {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      gap: 12px;
      margin-bottom: 10px;
    }

    .mechanic-kicker {
      margin: 0;
      font-size: 11px;
      letter-spacing: 0.14em;
      text-transform: uppercase;
      color: #94a9d6;
    }

    .mechanic-section-head h4 {
      margin: 2px 0 6px 0;
      font-size: 18px;
      letter-spacing: 0.04em;
      color: #e6f8ff;
    }

    .mechanic-sub {
      margin: 0;
      color: #9fb4e6;
      font-size: 13px;
      line-height: 1.5;
    }

    .weapon-pool {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .weapon-group {
      border: 1px solid rgba(34, 60, 104, 0.75);
      border-radius: 10px;
      padding: 10px;
      background: linear-gradient(150deg, rgba(14, 20, 36, 0.9), rgba(12, 18, 32, 0.92));
      box-shadow: 0 10px 20px rgba(0, 0, 0, 0.28);
    }

    .weapon-group-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 8px;
      margin-bottom: 8px;
    }

    .weapon-group-header h5 {
      margin: 0;
      font-size: 14px;
      letter-spacing: 0.06em;
      text-transform: uppercase;
      color: #dfe7ff;
    }

    .weapon-count {
      font-size: 12px;
      color: #8fb5ff;
      letter-spacing: 0.08em;
    }

    .weapon-chip {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 9px 10px;
      border: 1px solid rgba(60, 90, 140, 0.7);
      border-radius: 10px;
      background: linear-gradient(145deg, rgba(14, 20, 36, 0.92), rgba(9, 13, 24, 0.9));
      box-shadow: 0 8px 18px rgba(4, 8, 20, 0.45);
      cursor: grab;
      transition: border-color 0.2s, transform 0.2s, box-shadow 0.2s;
    }

    .weapon-chip:hover {
      border-color: rgba(109, 220, 255, 0.6);
      box-shadow: 0 10px 22px rgba(8, 16, 32, 0.5);
    }

    .weapon-chip:active {
      cursor: grabbing;
    }

    .weapon-chip .weapon-name {
      font-weight: 700;
      color: #e6f8ff;
    }

    .weapon-chip .weapon-meta {
      display: flex;
      gap: 6px;
      font-size: 12px;
      color: #9fb4e6;
      flex-wrap: wrap;
    }

    .weapon-chip.dragging {
      opacity: 0.75;
      transform: scale(0.99);
    }

    .hp-groups {
      position: relative;
      z-index: 1;
      display: grid;
      gap: 12px;
      grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
    }

    .hp-group {
      background: linear-gradient(170deg, rgba(9, 16, 32, 0.92), rgba(10, 22, 42, 0.95));
      border: 1px solid #1f2c49;
      border-radius: 12px;
      padding: 12px;
      box-shadow: 0 12px 22px rgba(0, 0, 0, 0.32);
    }

    .hp-group h4 {
      margin: 0 0 8px 0;
      font-weight: 800;
      letter-spacing: 0.04em;
      color: #dfe7ff;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    .hp-group small {
      color: #8fb5ff;
      letter-spacing: 0.08em;
      text-transform: uppercase;
    }

    .hp-slot {
      border: 1px dashed rgba(88, 108, 170, 0.55);
      border-radius: 12px;
      padding: 10px;
      display: flex;
      flex-direction: column;
      gap: 8px;
      background: linear-gradient(145deg, rgba(10, 16, 30, 0.82), rgba(9, 13, 24, 0.9));
      box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.04), 0 8px 18px rgba(4, 8, 20, 0.45);
      transition: border-color 0.18s ease, background 0.18s ease, transform 0.18s ease;
    }

    .hp-slot:not(:last-child) {
      margin-bottom: 8px;
    }

    .hp-slot.drag-over {
      border-color: #60a5fa;
      background: rgba(30, 48, 92, 0.58);
      box-shadow: 0 10px 24px rgba(12, 48, 96, 0.45);
    }

    .hp-slot .hp-slot-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 8px;
    }

    .hp-slot .hp-slot-label {
      font-size: 13px;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      color: #9fb4e6;
    }

    .hp-slot .hp-slot-clear {
      padding: 4px 8px;
      border-radius: 8px;
      border: 1px solid rgba(58, 76, 118, 0.8);
      background: rgba(10, 16, 30, 0.9);
      color: #cbd5ff;
      cursor: pointer;
      transition: background 0.18s ease, border-color 0.18s ease;
    }

    .hp-slot .hp-slot-clear:hover {
      background: rgba(22, 32, 56, 0.95);
      border-color: rgba(109, 220, 255, 0.55);
    }

    .hp-slot-body {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .hp-slot.empty .hp-slot-body {
      opacity: 0.85;
    }

    .hp-slot .weapon-name {
      font-weight: 700;
      color: #e6f8ff;
    }

    .hp-slot .weapon-meta {
      font-size: 12px;
      color: #9fb4e6;
      display: flex;
      gap: 6px;
      flex-wrap: wrap;
    }

    .hp-slot .hp-slot-hint {
      font-size: 12px;
      color: #7687b4;
      letter-spacing: 0.06em;
    }

    .weapon-icon-wrap {
      width: 46px;
      height: 46px;
      border-radius: 12px;
      background: rgba(20, 28, 46, 0.95);
      border: 1px solid rgba(74, 104, 164, 0.45);
      box-shadow: 0 10px 18px rgba(6, 12, 28, 0.55);
      display: flex;
      align-items: center;
      justify-content: center;
      overflow: hidden;
      flex-shrink: 0;
    }

    .weapon-icon-wrap img {
      width: 100%;
      height: 100%;
      object-fit: contain;
      image-rendering: auto;
    }

    .weapon-icon-placeholder {
      width: 46px;
      height: 46px;
      border-radius: 12px;
      border: 1px dashed rgba(88, 108, 170, 0.45);
      background: rgba(10, 16, 30, 0.8);
      box-shadow: inset 0 0 12px rgba(24, 32, 56, 0.55);
      display: flex;
      align-items: center;
      justify-content: center;
      color: #6b7da8;
      font-size: 11px;
      letter-spacing: 0.12em;
      text-transform: uppercase;
    }

    .weapon-icon-placeholder[data-type="main"] {
      border-color: rgba(58, 130, 246, 0.55);
      color: #90b4ff;
    }

    .weapon-icon-placeholder[data-type="missile"] {
      border-color: rgba(16, 185, 129, 0.55);
      color: #6dd9b7;
    }

    .weapon-icon-placeholder[data-type="aux"] {
      border-color: rgba(245, 158, 11, 0.55);
      color: #f6c26a;
    }

    .weapon-icon-placeholder[data-type="hangar"] {
      border-color: rgba(167, 139, 250, 0.55);
      color: #cab5ff;
    }

    .weapon-icon-placeholder[data-type="special"] {
      border-color: rgba(239, 68, 68, 0.55);
      color: #fda4a4;
    }

    .weapon-pill {
      padding: 3px 8px;
      border-radius: 999px;
      background: rgba(63, 88, 144, 0.35);
      border: 1px solid rgba(96, 165, 250, 0.35);
      color: #dfe7ff;
      font-size: 11px;
      letter-spacing: 0.06em;
      text-transform: uppercase;
    }

    .hp-main h4,
    .hp-main .hp-slot {
      outline: 1px solid #3b82f6;
    }

    .hp-miss h4,
    .hp-miss .hp-slot {
      outline: 1px solid #10b981;
    }

    .hp-aux h4,
    .hp-aux .hp-slot {
      outline: 1px solid #f59e0b;
    }

    .hp-hangar h4,
    .hp-hangar .hp-slot {
      outline: 1px solid #a78bfa;
    }

    .hp-spec h4,
    .hp-spec .hp-slot {
      outline: 1px solid #ef4444;
    }

    #infrastructure-overlay {
      max-width: 720px;
      width: min(720px, calc(100vw - 80px));
      opacity: 0;
      transform: translate(0, 12px);
      transition: opacity 0.25s ease, transform 0.28s ease;
      pointer-events: none;
    }

    #infrastructure-overlay.infra-visible {
      opacity: 1;
      transform: translate(0, 0);
      pointer-events: auto;
    }

    #infrastructure-overlay.infra-hiding {
      opacity: 0;
      transform: translate(0, 18px);
      pointer-events: none;
    }

    body.infrastructure-editor #infrastructure-overlay {
      right: 24px;
      left: auto;
      transform: translate(28px, 12px);
    }

    body.infrastructure-editor #infrastructure-overlay.infra-visible {
      transform: translate(0, 0);
    }

    body.infrastructure-editor #infrastructure-overlay.infra-hiding {
      transform: translate(18px, 18px);
    }

    #infrastructure-overlay h3 {
      cursor: grab;
      user-select: none;
    }

    #infrastructure-overlay.dragging h3 {
      cursor: grabbing;
    }

    #infrastructure-overlay.dragging {
      box-shadow: 0 22px 48px rgba(5, 32, 74, 0.65);
    }

    .infrastructure-body {
      display: flex;
      flex-direction: column;
      gap: 14px;
      align-items: stretch;
    }

    .infra-building-list {
      display: flex;
      flex-direction: column;
      gap: 12px;
      max-height: 520px;
      overflow-y: auto;
      padding-right: 4px;
    }

    .infra-building {
      background: linear-gradient(160deg, rgba(10, 26, 48, 0.82), rgba(12, 32, 58, 0.9));
      border: 1px solid var(--fa-border);
      border-radius: 12px;
      padding: 12px;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 8px;
      cursor: grab;
      transition: border-color 0.2s, transform 0.2s, box-shadow 0.2s;
      box-shadow: 0 12px 26px rgba(0, 0, 0, 0.28);
    }

    .infra-building:hover {
      border-color: var(--fa-strong-border);
      box-shadow: 0 12px 26px rgba(16, 38, 84, 0.45);
    }

    .infra-building:active {
      cursor: grabbing;
    }

    .infra-building.dragging {
      opacity: 0.65;
      transform: scale(0.98);
    }

    .infra-building-canvas {
      width: 96px;
      height: 96px;
      border-radius: 12px;
      background: radial-gradient(circle at 50% 35%, rgba(109, 220, 255, 0.38), rgba(12, 18, 36, 0.95));
    }

    .infra-building-name {
      font-weight: 700;
      letter-spacing: 0.04em;
      text-align: center;
      color: #e6f8ff;
      text-shadow: 0 0 8px rgba(109, 220, 255, 0.35);
    }

    .infra-building-meta {
      font-size: 12px;
      color: var(--fa-muted);
      text-align: center;
    }

    .infra-progress-bar {
      position: absolute;
      top: 8px;
      left: 8px;
      right: 8px;
      height: 6px;
      border-radius: 6px;
      background: rgba(47, 68, 128, 0.45);
      overflow: hidden;
    }

    .infra-progress-fill {
      height: 100%;
      width: 0%;
      background: linear-gradient(90deg, #3b82f6, #60a5fa);
      transition: width 0.2s ease-out;
    }

    .infra-info {
      background: rgba(8, 12, 24, 0.6);
      border: 1px solid #1f2c49;
      border-radius: 12px;
      padding: 12px 14px;
      min-height: 120px;
      display: flex;
      flex-direction: column;
      gap: 6px;
    }

    .infra-info h4 {
      margin: 0;
      font-size: 16px;
      color: #8fb5ff;
      letter-spacing: 0.04em;
    }

    .infra-info p {
      margin: 0;
      font-size: 14px;
      color: #cbd5ff;
      line-height: 1.5;
    }

    .infra-info .infra-info-progress {
      margin-top: 4px;
    }

    .infra-info .infra-info-progress strong {
      display: block;
      font-size: 12px;
      letter-spacing: 0.08em;
      color: #94a9d6;
      text-transform: uppercase;
      margin-bottom: 4px;
    }

    .infra-info .infra-info-progress .infra-progress-bar {
      position: relative;
      top: auto;
      left: auto;
      right: auto;
      margin-top: 4px;
    }

    .infra-info .infra-info-progress .infra-progress-fill {
      transition: width 0.15s ease-out;
    }

    .hover-info {
      position: absolute;
      top: 120px;
      right: 40px;
      min-width: 220px;
      max-width: 320px;
      background: var(--fa-panel);
      border: 1px solid var(--fa-border);
      border-radius: 14px;
      padding: 14px 18px;
      z-index: 55;
      color: var(--fa-text);
      font-family: var(--fa-font);
      pointer-events: none;
      backdrop-filter: blur(12px);
      box-shadow: var(--fa-glow);
    }

    .hover-info.hidden {
      display: none !important;
    }

    .hover-info .hover-title {
      font-size: 16px;
      font-weight: 600;
      letter-spacing: 0.04em;
      margin: 0 0 4px 0;
    }

    .hover-info .hover-subtitle {
      display: block;
      font-size: 11px;
      letter-spacing: 0.18em;
      text-transform: uppercase;
      color: #8fb5ff;
      margin-bottom: 12px;
    }

    .hover-info .hover-section {
      font-size: 11px;
      letter-spacing: 0.12em;
      text-transform: uppercase;
      color: #94a9d6;
      margin-bottom: 6px;
    }

    .hover-info .hover-tags {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
    }

    .hover-info .hover-tag {
      padding: 4px 10px;
      border-radius: 999px;
      background: rgba(63, 88, 144, 0.38);
      color: #dfe7ff;
      font-size: 12px;
    }

    .hover-info .hover-line {
      font-size: 13px;
      margin-bottom: 6px;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .hover-info .hover-line strong {
      font-weight: 600;
      color: #8fb5ff;
      letter-spacing: 0.05em;
    }

    #zoom-indicator {
      position: absolute;
      right: 24px;
      top: 22px;
      padding: 8px 12px;
      background: linear-gradient(150deg, rgba(66, 142, 210, 0.32), rgba(55, 116, 186, 0.42));
      border: 1px solid var(--fa-border);
      border-radius: 10px;
      color: var(--fa-text);
      font-family: var(--fa-font);
      font-size: 14px;
      letter-spacing: 0.12em;
      text-transform: uppercase;
      box-shadow: 0 10px 22px rgba(0, 0, 0, 0.35);
      opacity: 0;
      transform: translateY(-6px);
      transition: opacity 0.22s ease, transform 0.22s ease;
      pointer-events: none;
      z-index: 80;
    }

    #zoom-indicator.visible {
      opacity: 1;
      transform: translateY(0);
    }

    .planet-radar {
      position: fixed;
      inset: 0;
      pointer-events: none;
      z-index: 78;
      font-family: Inter, system-ui, Segoe UI, Roboto, Arial;
    }

    .planet-radar.hidden {
      display: none !important;
    }

    .planet-radar-item {
      position: absolute;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 0;
      transform: translate(-50%, -50%);
      color: #e2e8f8;
      text-shadow: 0 2px 10px rgba(0, 0, 0, 0.55);
    }

    .planet-radar-label {
      padding: 4px 10px;
      border-radius: 999px;
      background: rgba(26, 39, 68, 0.8);
      border: 1px solid rgba(96, 132, 194, 0.6);
      font-size: 11px;
      letter-spacing: 0.14em;
      text-transform: uppercase;
      white-space: nowrap;
    }

    .planet-radar-item.pirate .planet-radar-label,
    .planet-radar-label.pirate {
      background: linear-gradient(150deg, rgba(140, 18, 18, 0.9), rgba(189, 42, 42, 0.9));
      border-color: rgba(255, 124, 124, 0.75);
      color: #ffecec;
      box-shadow: 0 14px 24px rgba(255, 70, 70, 0.28);
    }

    /* --- Styl widoku szczegółowego (Windows Explorer style) --- */

    /* Ograniczenie wysokości kolumn, aby pojawił się scrollbar */
    .mechanic-body {
      height: 520px;
      /* Stała wysokość obszaru roboczego */
      max-height: calc(80vh - 160px);
      overflow: hidden;
    }

    .mechanic-column {
      height: 100%;
      display: flex;
      flex-direction: column;
      min-height: 0;
    }

    .mechanic-section {
      flex: 1;
      display: flex;
      flex-direction: column;
      overflow: hidden;
      /* Ważne dla scrolla wewnątrz */
      padding: 0;
      /* Reset paddingu dla czystszego wyglądu */
    }

    .mechanic-section-head {
      padding: 10px 12px;
      background: rgba(16, 24, 40, 0.9);
      border-bottom: 1px solid rgba(60, 90, 140, 0.5);
      flex-shrink: 0;
      /* Nagłówek się nie kurczy */
    }

    .mechanic-tabs {
      display: flex;
      gap: 6px;
      padding: 8px 10px;
      flex-shrink: 0;
    }

    .mechanic-tab-btn {
      padding: 6px 10px;
      border-radius: 10px;
      border: 1px solid rgba(60, 90, 140, 0.6);
      background: rgba(12, 18, 32, 0.92);
      color: #dfe7ff;
      font-size: 12px;
      letter-spacing: 0.04em;
      text-transform: uppercase;
      cursor: pointer;
      transition: background 0.18s ease, border-color 0.18s ease, color 0.18s ease;
    }

    .mechanic-tab-btn:hover {
      background: rgba(22, 34, 60, 0.95);
      border-color: rgba(109, 220, 255, 0.5);
    }

    .mechanic-tab-btn.active {
      background: linear-gradient(145deg, rgba(109, 220, 255, 0.28), rgba(58, 116, 186, 0.4));
      color: #e6f8ff;
      border-color: rgba(109, 220, 255, 0.75);
      box-shadow: 0 10px 20px rgba(4, 12, 28, 0.35);
    }

    /* Kontenery na listy z przewijaniem */
    .weapon-pool,
    .hp-groups {
      overflow-y: auto;
      padding: 8px 10px 10px 10px;
      flex: 1;
      display: flex;
      flex-direction: column;
      gap: 4px;
      /* Mały odstęp między wierszami */
      scrollbar-width: none;
      -ms-overflow-style: none;
    }

    .weapon-pool::-webkit-scrollbar,
    .hp-groups::-webkit-scrollbar {
      display: none;
    }

    /* --- Wygląd Wiersza (ROW) zamiast Kafelka --- */

    /* Nagłówki grup (np. "Broń główna") */
    .list-group-header {
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      color: #8fb5ff;
      background: rgba(30, 45, 70, 0.6);
      padding: 4px 8px;
      margin-top: 8px;
      border-radius: 4px;
      font-weight: 700;
    }

    /* Wiersz z bronią (do przeciągania) */
    .weapon-row {
      display: grid;
      grid-template-columns: 28px 2fr 1fr;
      /* Ikona | Nazwa | Statystyki */
      align-items: center;
      gap: 8px;
      padding: 4px 8px;
      background: rgba(14, 20, 36, 0.6);
      border: 1px solid rgba(60, 90, 140, 0.3);
      border-radius: 4px;
      cursor: grab;
      font-size: 12px;
      transition: background 0.15s;
    }

    .weapon-row:hover {
      background: rgba(60, 100, 160, 0.3);
      border-color: rgba(100, 150, 255, 0.5);
    }

    .weapon-row.dragging {
      opacity: 0.5;
      background: #2a3a5a;
    }

    /* Mini ikona w wierszu */
    .weapon-row-icon {
      width: 24px;
      height: 24px;
      background: rgba(0, 0, 0, 0.3);
      border-radius: 4px;
      display: flex;
      align-items: center;
      justify-content: center;
      overflow: hidden;
    }

    .weapon-row-icon img {
      width: 100%;
      height: 100%;
      object-fit: contain;
    }

    .weapon-row-icon.placeholder {
      font-size: 9px;
      color: #555;
      border: 1px dashed #444;
    }

    .weapon-row-name {
      font-weight: 600;
      color: #e6f8ff;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .weapon-row-meta {
      color: #94a9d6;
      font-size: 11px;
      text-align: right;
    }

    /* Wiersz Hardpointu (Slot) */
    .hp-row {
      display: grid;
      grid-template-columns: 28px 80px 1fr 24px;
      /* Ikona | Typ slotu | Zamontowane | Przycisk X */
      align-items: center;
      gap: 8px;
      padding: 4px 8px;
      background: rgba(10, 16, 30, 0.7);
      border: 1px dashed rgba(88, 108, 170, 0.4);
      border-radius: 4px;
      font-size: 12px;
      min-height: 34px;
    }

    .hp-row.drag-over {
      background: rgba(50, 120, 200, 0.25);
      border-color: #60a5fa;
    }

    .hp-row-label {
      color: #6b7da8;
      font-size: 11px;
      text-transform: uppercase;
    }

    .hp-row-mount {
      color: #8fb5ff;
      font-weight: 600;
    }

    .hp-row-mount.empty {
      color: #4b5563;
      font-style: italic;
      font-weight: 400;
    }

    .hp-row-clear {
      width: 20px;
      height: 20px;
      border: none;
      background: transparent;
      color: #ff6b6b;
      cursor: pointer;
      font-weight: bold;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 4px;
    }

    .hp-row-clear:hover {
      background: rgba(255, 100, 100, 0.15);
    }

    .hp-row-clear:disabled {
      color: #333;
      cursor: default;
    }

    /* Kolorowanie ramek slotów wg typu */
    .hp-row[data-hp-type="main"] {
      border-left: 3px solid #3b82f6;
    }

    .hp-row[data-hp-type="missile"] {
      border-left: 3px solid #10b981;
    }

    .hp-row[data-hp-type="aux"] {
      border-left: 3px solid #f59e0b;
    }

    .hp-row[data-hp-type="hangar"] {
      border-left: 3px solid #a78bfa;
    }

    .hp-row[data-hp-type="special"] {
      border-left: 3px solid #ef4444;
    }

/* Overlay 3D musi być nad głównym canvasem (#c) */
    canvas.overlay3d {
      position: absolute;
      inset: 0;
      pointer-events: none !important;
      z-index: 30 !important;
    }

:root {
      --fa-font: 'Segoe UI', 'Frutiger', 'Inter', system-ui, -apple-system, sans-serif;
      --fa-text: #e8f6ff;
      --fa-muted: #b8d6f3;

      /* --- NOWE STYLE AERO HUD --- */
      --glass-bg: rgba(16, 24, 45, 0.85);
      --glass-border: rgba(255, 255, 255, 0.12);
      --glass-highlight: rgba(255, 255, 255, 0.25);
      --glass-shadow: 0 8px 32px rgba(0, 0, 0, 0.6);

      --hp-color: #ef4444;
      --hp-low-color: #ff0000;
      --shield-color: #3b82f6;
      --power-glow: #06b6d4;
      --boost-glow: #f59e0b;
      --core-glow: #84cc16;
      --warp-glow: #a78bfa;
      --text-muted: #94a3b8;
      --loc-glow: #fcd34d;
      --speed-text: #e2e8f0;

      /* Menu Colors */
      --mode-battle: #ef4444;
      --mode-cruise: #3b82f6;
      --mode-salvage: #f59e0b;
      --mode-mining: #10b981;
      --mode-intel: #8b5cf6;
    }

    html,
    body {
      height: 100%;
      margin: 0;
      background: #000;
      color: var(--fa-text);
      font-family: var(--fa-font);
      overflow: hidden;
      user-select: none;
    }

    /* Canvas Gry */
    #game-root {
      position: absolute;
      inset: 0;
      z-index: 0;
    }

    canvas {
      display: block;
      width: 100%;
      height: 100%;
    }

    /* --- UI LAYOUT --- */
    .hidden {
      display: none !important;
    }

    /* Hint box (Góra-Lewo) */
    .hint-box {
      position: fixed;
      top: 20px;
      right: 20px;
      color: rgba(255, 255, 255, 0.4);
      font-size: 13px;
      pointer-events: none;
      text-align: right;
      z-index: 150;
    }

    kbd {
      background: rgba(255, 255, 255, 0.1);
      padding: 2px 6px;
      border-radius: 4px;
      color: #fff;
      font-family: monospace;
    }

    /* --- SIDE PANELS --- */
    #side-panels-container {
      position: fixed;
      left: 20px;
      top: 140px;
      display: flex;
      flex-direction: column;
      gap: 16px;
      z-index: 90;
      width: 280px;
      transition: width 0.4s ease;
    }

    #right-panels-container {
      position: fixed;
      right: 20px;
      top: 140px;
      display: flex;
      flex-direction: column;
      gap: 16px;
      z-index: 90;
      width: 260px;
      align-items: flex-end;
    }

    .side-panel-transparent {
      background: rgba(10, 16, 30, 0.45);
      backdrop-filter: blur(4px);
      border-radius: 8px;
      border: none;
      box-shadow: none;
      overflow: hidden;
      width: 100%;
      transition: all 0.4s cubic-bezier(0.25, 0.8, 0.25, 1);
      pointer-events: auto;
    }

    .side-panel-transparent.collapsed {
      width: 44px;
      background: var(--glass-bg);
      border: 1px solid var(--glass-border);
      box-shadow: var(--glass-shadow);
    }

    #side-panels-container .side-panel-transparent.collapsed {
      transform: translateX(-20px);
      border-radius: 0 12px 12px 0;
      border-left: none;
    }

    #right-panels-container .side-panel-transparent.collapsed {
      transform: translateX(20px);
      border-radius: 12px 0 0 12px;
      border-right: none;
    }

    .panel-header {
      padding: 6px 12px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      cursor: pointer;
      background: transparent;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
      transition: all 0.4s ease;
      height: 32px;
      white-space: nowrap;
    }

    .side-panel-transparent.collapsed .panel-header {
      height: 160px;
      padding: 0;
      justify-content: center;
      flex-direction: column-reverse;
      border-bottom: none;
    }

    .panel-title {
      font-size: 13px;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 2px;
      color: #e8f6ff;
      text-shadow: 0 0 8px rgba(109, 220, 255, 0.4);
      transition: transform 0.4s ease;
    }

    .side-panel-transparent.collapsed .panel-title {
      writing-mode: vertical-rl;
      transform: rotate(0deg);
    }

    .panel-chevron {
      font-size: 10px;
      color: var(--text-muted);
      transition: transform 0.4s ease, margin 0.4s ease;
    }

    #side-panels-container .side-panel-transparent.collapsed .panel-chevron {
      margin-top: 10px;
      transform: rotate(90deg);
    }

    #right-panels-container .side-panel-transparent.collapsed .panel-chevron {
      margin-top: 10px;
      transform: rotate(-90deg);
    }

    .panel-body {
      padding: 8px 0;
      max-height: 600px;
      opacity: 1;
      transition: max-height 0.4s cubic-bezier(0, 1, 0, 1), opacity 0.2s ease, padding 0.2s ease;
      display: flex;
      flex-direction: column;
      gap: 0;
      overflow-y: auto;
      scrollbar-width: none;
    }

    .side-panel-transparent.collapsed .panel-body {
      max-height: 0;
      padding: 0;
      opacity: 0;
      pointer-events: none;
    }

    /* Cards */
    .support-card {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 8px 12px;
      background: transparent;
      border: none;
      border-bottom: 1px solid rgba(255, 255, 255, 0.05);
      cursor: grab;
      transition: background 0.2s;
      position: relative;
      overflow: hidden;
    }

    .support-card:active {
      cursor: grabbing;
      background: rgba(255, 255, 255, 0.06);
    }

    .support-card:hover {
      background: rgba(255, 255, 255, 0.03);
    }

    .support-card.disabled {
      opacity: 0.4;
      cursor: not-allowed;
      pointer-events: none;
    }

    .ship-icon-wrap {
      width: 36px;
      height: 32px;
      display: flex;
      align-items: center;
      justify-content: center;
      margin-right: 12px;
      background: rgba(0, 0, 0, 0.2);
      border-radius: 4px;
      border: 1px solid rgba(255, 255, 255, 0.05);
    }

    /* CSS Icons for Ships */
    .icon-capital {
      display: flex;
      align-items: center;
      gap: 2px;
    }

    .icon-cap-center {
      width: 12px;
      height: 20px;
      background: #e2e8f0;
      border: 1px solid #94a3b8;
    }

    .icon-cap-side {
      width: 5px;
      height: 14px;
      background: #cbd5e1;
      border: 1px solid #94a3b8;
    }

    .icon-battleship {
      display: flex;
      align-items: center;
      gap: 1px;
    }

    .icon-bs-rect {
      width: 10px;
      height: 14px;
      background: #e2e8f0;
      border: 1px solid #94a3b8;
    }

    .icon-bs-chevron {
      width: 0;
      height: 0;
      border-top: 7px solid transparent;
      border-bottom: 7px solid transparent;
      border-left: 10px solid #e2e8f0;
    }

    .icon-destroyer {
      width: 22px;
      height: 10px;
      background: #cbd5e1;
      border: 1px solid #94a3b8;
    }

    .icon-frigate {
      width: 14px;
      height: 14px;
      background: #93c5fd;
      border: 1px solid #60a5fa;
    }

    .icon-fighter {
      width: 0;
      height: 0;
      border-left: 7px solid transparent;
      border-right: 7px solid transparent;
      border-bottom: 14px solid #86efac;
      transform: translateY(-2px);
    }

    .support-details {
      flex: 1;
      display: flex;
      flex-direction: column;
      gap: 1px;
    }

    .ship-name {
      font-size: 13px;
      font-weight: 600;
      color: #f1f5f9;
      letter-spacing: 0.5px;
    }

    .ship-role {
      font-size: 9px;
      color: var(--text-muted);
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    .support-count {
      font-family: 'Consolas', monospace;
      font-size: 14px;
      font-weight: 700;
      color: #a5f3fc;
      text-shadow: 0 0 5px rgba(6, 182, 212, 0.5);
      background: rgba(6, 182, 212, 0.1);
      padding: 2px 6px;
      border-radius: 4px;
      border: 1px solid rgba(6, 182, 212, 0.2);
    }

    .orders-row {
      margin-top: 4px;
      padding: 8px 12px;
      border-top: 1px solid rgba(255, 255, 255, 0.1);
      display: flex;
      gap: 8px;
    }

    .glass-btn {
      flex: 1;
      padding: 8px 10px;
      border-radius: 6px;
      background: linear-gradient(145deg, rgba(59, 130, 246, 0.2) 0%, rgba(30, 64, 175, 0.1) 100%);
      border: 1px solid rgba(96, 165, 250, 0.4);
      color: #bfdbfe;
      font-size: 11px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      cursor: pointer;
      transition: all 0.2s;
      text-align: center;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
    }

    .glass-btn:hover {
      background: linear-gradient(145deg, rgba(59, 130, 246, 0.3) 0%, rgba(30, 64, 175, 0.2) 100%);
      border-color: #60a5fa;
      color: #fff;
      transform: translateY(-1px);
    }

    .glass-btn.active {
      background: linear-gradient(145deg, rgba(59, 130, 246, 0.5) 0%, rgba(30, 64, 175, 0.4) 100%);
      border-color: #60a5fa;
      color: #fff;
      box-shadow: 0 0 10px rgba(59, 130, 246, 0.4);
    }

    /* Fleet List */
    .fleet-list {
      display: flex;
      flex-direction: column;
      gap: 0;
    }

    .fleet-item {
      background: transparent;
      border: none;
      border-bottom: 1px solid rgba(255, 255, 255, 0.05);
      border-radius: 0;
      padding: 8px 12px;
      display: flex;
      flex-direction: column;
      gap: 4px;
      transition: background 0.2s;
    }

    .fleet-item:hover {
      background: rgba(255, 255, 255, 0.03);
    }

    .fleet-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .fleet-name {
      font-size: 13px;
      font-weight: 600;
      color: #f1f5f9;
      letter-spacing: 0.5px;
    }

    .fleet-type {
      font-size: 9px;
      text-transform: uppercase;
      color: #64748b;
      font-weight: 700;
      letter-spacing: 0.5px;
    }

    .fleet-bars {
      display: flex;
      gap: 4px;
      height: 3px;
      margin-top: 4px;
      opacity: 0.8;
    }

    .mini-bar {
      flex: 1;
      background: rgba(255, 255, 255, 0.08);
      border-radius: 1px;
      overflow: hidden;
    }

    .mini-fill {
      height: 100%;
      width: 100%;
    }

    .mini-fill.hp {
      background: var(--hp-color);
    }

    .mini-fill.shield {
      background: var(--shield-color);
    }

    /* --- DOCK & HUD --- */
    .hud-dock {
      position: relative;
      background: var(--glass-bg);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      border: 1px solid var(--glass-border);
      box-shadow: var(--glass-shadow), inset 0 1px 0 rgba(255, 255, 255, 0.1);
      min-width: 520px;
      display: flex;
      flex-direction: column;
      gap: 0;
      transition: all 0.5s cubic-bezier(0.25, 0.8, 0.25, 1);
      pointer-events: auto;
    }

    .hud-dock.expanded {
      min-width: 760px;
    }

    /* TOP CONTAINER */
    #hud-top-container {
      position: fixed;
      top: 20px;
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      align-items: flex-start;
      z-index: 110;
    }

    #hud-top-dock {
      border-bottom: 1px solid var(--glass-highlight);
      border-top: 1px solid var(--glass-border);
      border-radius: 0 0 16px 16px;
      padding: 6px 18px 8px 18px;
    }

    .location-display {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 36px;
    }

    .loc-label {
      font-size: 9px;
      color: var(--text-muted);
      letter-spacing: 2px;
      text-transform: uppercase;
    }

    .loc-name {
      font-size: 16px;
      font-weight: 700;
      color: var(--loc-glow);
      text-shadow: 0 0 12px rgba(253, 224, 71, 0.4);
      letter-spacing: 1px;
      text-transform: uppercase;
    }

    /* BOTTOM CONTAINER */
    #hud-bottom-container {
      position: fixed;
      bottom: 30px;
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      align-items: flex-end;
      gap: 12px;
      z-index: 100;
      transition: gap 0.5s ease;
    }

    #hud-center-dock {
      border-top: 1px solid var(--glass-highlight);
      border-radius: 16px 16px 0 0;
      padding: 8px 18px 8px 18px;
      border-radius: 16px;
    }

    /* Wings */
    .hud-wing {
      width: 420px;
      display: flex;
      flex-direction: column;
      gap: 6px;
      margin-bottom: 2px;
      opacity: 0.95;
      transition: transform 0.2s;
      pointer-events: none;
    }

    .hud-wing.left {
      align-items: flex-end;
    }

    .hud-wing.right {
      align-items: flex-end;
    }

    #hex-armor-container {
      width: 240px;
      justify-content: flex-end;
      align-items: flex-end;
    }

    #hex-armor-container .hex-armor-canvas {
      display: block;
      background: rgba(4, 8, 14, 0.78);
      border: 1px solid rgba(115, 145, 190, 0.35);
      border-radius: 10px;
      box-shadow: inset 0 0 18px rgba(20, 40, 70, 0.35), 0 8px 20px rgba(0, 0, 0, 0.45);
    }

    .stat-bar-aero {
      height: 10px;
      width: 100%;
      background: rgba(0, 0, 0, 0.5);
      border: 1px solid var(--glass-border);
      border-top: 1px solid rgba(255, 255, 255, 0.2);
      border-radius: 4px;
      position: relative;
      overflow: hidden;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
      transform: skewX(-12deg);
      transition: border-color 0.2s, box-shadow 0.2s;
    }

    .hud-wing.right .stat-bar-aero {
      transform: skewX(12deg);
    }

    /* Anchoring bars */
    .hud-wing.left .stat-ghost,
    .hud-wing.left .stat-fill {
      right: 0;
      left: auto;
    }

    .hud-wing.right .stat-ghost,
    .hud-wing.right .stat-fill {
      left: 0;
      right: auto;
    }

    .stat-ghost {
      position: absolute;
      top: 0;
      bottom: 0;
      background: rgba(255, 255, 255, 0.9);
      width: 100%;
      transition: width 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94) 0.15s;
      z-index: 1;
      box-shadow: 0 0 15px rgba(255, 255, 255, 0.4);
    }

    .stat-fill {
      height: 100%;
      width: 100%;
      position: absolute;
      top: 0;
      z-index: 2;
      transition: width 0.15s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .stat-fill::after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 40%;
      background: linear-gradient(to bottom, rgba(255, 255, 255, 0.35), transparent);
    }

    .stat-fill.hp {
      background: linear-gradient(90deg, #991b1b, var(--hp-color));
      box-shadow: 0 0 20px rgba(239, 68, 68, 0.3);
    }

    .stat-fill.shield {
      background: linear-gradient(90deg, #1e40af, var(--shield-color));
      box-shadow: 0 0 20px rgba(59, 130, 246, 0.3);
    }

    .stat-unit {
      display: flex;
      flex-direction: column;
      gap: 1px;
      margin-bottom: 4px;
      width: 100%;
    }

    .hud-wing.left .stat-unit {
      align-items: flex-end;
    }

    .stat-value-text {
      font-size: 18px;
      font-weight: 700;
      text-shadow: 0 2px 10px rgba(0, 0, 0, 0.8);
      letter-spacing: 0.05em;
      font-family: 'Segoe UI', sans-serif;
    }

    .stat-label {
      font-size: 11px;
      text-transform: uppercase;
      color: #94a3b8;
      font-weight: 700;
      letter-spacing: 0.1em;
      margin-bottom: -2px;
    }

    /* Drawers & Animation */
    .hud-drawer {
      width: 100%;
      height: 0;
      overflow: hidden;
      opacity: 0;
      border-bottom: 1px solid transparent;
      transition: height 0.4s cubic-bezier(0.25, 0.8, 0.25, 1), opacity 0.2s ease, margin-bottom 0.4s cubic-bezier(0.25, 0.8, 0.25, 1);
      display: flex;
      flex-direction: column;
    }

    .drawer-content-wrapper {
      opacity: 1;
      transition: opacity 0.15s ease;
      height: 100%;
      display: flex;
      flex-direction: column;
    }

    .drawer-content-wrapper.fading {
      opacity: 0;
    }

    #top-drawer {
      margin-top: 0;
    }

    .hud-dock.expanded #top-drawer {
      height: 450px;
      opacity: 1;
      margin-top: 16px;
      border-bottom-color: rgba(255, 255, 255, 0.1);
    }

    #bottom-drawer {
      margin-bottom: 0;
    }

    .hud-dock.expanded #bottom-drawer {
      opacity: 1;
      margin-bottom: 16px;
      border-bottom-color: rgba(255, 255, 255, 0.1);
    }

    /* Dashboard & Gauges */
    .dock-dashboard {
      display: flex;
      align-items: flex-end;
      justify-content: space-between;
      gap: 12px;
      margin-bottom: 6px;
    }

    .dash-group {
      flex: 1;
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    .dash-group.center {
      align-items: center;
      justify-content: flex-end;
    }

    .speed-display {
      text-align: center;
      margin-bottom: 4px;
    }

    .speed-value {
      font-family: 'Consolas', monospace;
      font-size: 24px;
      font-weight: 700;
      color: var(--speed-text);
      text-shadow: 0 0 8px rgba(255, 255, 255, 0.2);
      letter-spacing: 1px;
      display: block;
      line-height: 1;
    }

    .speed-unit {
      font-size: 9px;
      color: var(--text-muted);
      letter-spacing: 2px;
      text-transform: uppercase;
    }

    .dash-label {
      font-size: 10px;
      text-transform: uppercase;
      color: #94a3b8;
      font-weight: 700;
      letter-spacing: 1px;
    }

    .dash-group.right .dash-label {
      text-align: right;
    }

    .dash-group.center .dash-label {
      font-size: 8px;
      opacity: 0.7;
      margin-top: 2px;
    }

    .dash-gauge {
      height: 10px;
      background: rgba(0, 0, 0, 0.4);
      border-radius: 2px;
      border: 1px solid rgba(255, 255, 255, 0.15);
      position: relative;
      overflow: hidden;
      transform: skewX(-15deg);
    }

    .dash-group.right .dash-gauge {
      transform: skewX(15deg);
    }

    .dash-group.center .dash-gauge {
      transform: skewX(0deg);
      width: 100%;
      height: 6px;
    }

    .dash-fill {
      height: 100%;
      width: 0%;
      position: absolute;
      left: 0;
      top: 0;
      transition: width 0.1s linear;
    }

    .dash-fill::after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 50%;
      background: rgba(255, 255, 255, 0.3);
    }

    .dash-fill.power {
      background: var(--power-glow);
      box-shadow: 0 0 12px var(--power-glow);
    }

    .dash-fill.boost {
      background: var(--boost-glow);
      box-shadow: 0 0 12px var(--boost-glow);
    }

    .dash-fill.core {
      background: var(--core-glow);
      box-shadow: 0 0 12px var(--core-glow);
    }

    /* Warp Bar */
    .warp-separator-container {
      width: 100%;
      height: 0;
      background: rgba(0, 0, 0, 0.4);
      border: 1px solid rgba(255, 255, 255, 0);
      border-radius: 3px;
      position: relative;
      overflow: hidden;
      margin-bottom: 0;
      opacity: 0;
      transition: height 0.4s cubic-bezier(0.25, 0.8, 0.25, 1), margin-bottom 0.4s cubic-bezier(0.25, 0.8, 0.25, 1), border-color 0.4s ease, opacity 0.2s ease 0s;
    }

    .hud-dock.warp-mode .warp-separator-container {
      height: 6px;
      margin-bottom: 12px;
      border-color: rgba(255, 255, 255, 0.1);
      opacity: 1;
      transition-delay: 0s, 0s, 0s, 0.3s;
    }

    .warp-separator-fill {
      height: 100%;
      width: 0%;
      background: var(--warp-glow);
      box-shadow: 0 0 15px var(--warp-glow);
      transition: width 0.1s linear;
    }

    .warp-label-center {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 8px;
      color: #fff;
      font-weight: 800;
      letter-spacing: 2px;
      opacity: 0;
      text-shadow: 0 0 4px rgba(0, 0, 0, 0.8);
      z-index: 2;
    }

    .hud-dock.warp-mode .warp-label-center {
      opacity: 1;
      transition: opacity 0.2s 0.4s;
    }

    /* Skill Keys */
    .skill-row {
      display: flex;
      gap: 8px;
      justify-content: center;
      margin-top: 4px;
    }

    .glass-key {
      width: 36px;
      height: 36px;
      border-radius: 6px;
      background: linear-gradient(145deg, rgba(255, 255, 255, 0.08) 0%, rgba(255, 255, 255, 0.01) 100%);
      border: 1px solid rgba(255, 255, 255, 0.15);
      border-top: 1px solid rgba(255, 255, 255, 0.35);
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2), inset 0 1px 0 rgba(255, 255, 255, 0.1);
      display: flex;
      align-items: center;
      justify-content: center;
      color: rgba(255, 255, 255, 0.7);
      font-size: 12px;
      font-weight: 700;
      font-family: 'Consolas', monospace;
      position: relative;
      transition: all 0.1s ease;
      cursor: pointer;
      pointer-events: auto;
    }

    .glass-key span {
      position: absolute;
      top: 3px;
      left: 5px;
      font-size: 9px;
      color: rgba(255, 255, 255, 0.4);
      font-family: var(--fa-font);
    }

    .glass-key.active {
      background: linear-gradient(145deg, rgba(59, 130, 246, 0.3) 0%, rgba(37, 99, 235, 0.1) 100%);
      border-color: #60a5fa;
      box-shadow: 0 0 15px rgba(59, 130, 246, 0.4), inset 0 0 12px rgba(59, 130, 246, 0.2);
      color: #fff;
      transform: translateY(1px);
    }

    .glass-key:hover {
      border-color: rgba(255, 255, 255, 0.4);
      background: linear-gradient(145deg, rgba(255, 255, 255, 0.12) 0%, rgba(255, 255, 255, 0.04) 100%);
    }

    /* Menu Grid */
    .menu-grid {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 12px;
      padding: 24px;
      height: 100%;
      min-height: min-content;
      flex-wrap: wrap;
    }

    .menu-btn {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      width: 110px;
      height: 120px;
      background: linear-gradient(180deg, rgba(255, 255, 255, 0.06) 0%, rgba(255, 255, 255, 0.02) 100%);
      border: 1px solid rgba(255, 255, 255, 0.15);
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
      position: relative;
    }

    .menu-btn:hover {
      background: linear-gradient(180deg, rgba(255, 255, 255, 0.1) 0%, rgba(255, 255, 255, 0.04) 100%);
      transform: translateY(-4px);
      border-color: rgba(255, 255, 255, 0.3);
      box-shadow: 0 8px 16px rgba(0, 0, 0, 0.3);
    }

    .menu-btn .key-hint {
      font-size: 18px;
      font-weight: 700;
      color: rgba(255, 255, 255, 0.3);
      margin-bottom: 12px;
      font-family: 'Consolas', monospace;
    }

    .menu-btn .label {
      font-size: 11px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 1px;
      color: #e8f6ff;
      text-align: center;
    }

    .menu-header {
      text-align: center;
      padding: 10px 0 0 0;
      font-size: 14px;
      letter-spacing: 2px;
      color: var(--text-muted);
      text-transform: uppercase;
      font-weight: 700;
      flex-shrink: 0;
    }

    /* Station Styles */
    .station-header {
      padding: 8px 12px;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .station-title h2 {
      margin: 0;
      font-size: 16px;
      text-transform: uppercase;
      letter-spacing: 2px;
      color: #fff;
      text-shadow: 0 0 10px rgba(255, 255, 255, 0.3);
    }

    .station-title span {
      font-size: 10px;
      color: var(--text-muted);
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    .station-credits {
      font-family: 'Consolas', monospace;
      font-size: 14px;
      font-weight: 700;
      color: #fbbf24;
      text-shadow: 0 0 8px rgba(251, 191, 36, 0.4);
    }

    .station-nav {
      display: flex;
      padding: 12px 12px 0 12px;
      gap: 4px;
      border-bottom: 1px solid rgba(255, 255, 255, 0.05);
    }

    .station-tab-btn {
      padding: 8px 12px;
      background: transparent;
      border: none;
      border-bottom: 2px solid transparent;
      color: rgba(255, 255, 255, 0.6);
      font-family: var(--fa-font);
      font-size: 11px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 1px;
      cursor: pointer;
      transition: all 0.2s;
    }

    .station-tab-btn:hover {
      color: #fff;
      background: rgba(255, 255, 255, 0.05);
      border-radius: 4px 4px 0 0;
    }

    .station-tab-btn.active {
      color: #60a5fa;
      border-bottom-color: #60a5fa;
      text-shadow: 0 0 8px rgba(96, 165, 250, 0.4);
    }

    .station-content {
      flex: 1;
      padding: 16px;
      overflow-y: auto;
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
      gap: 12px;
      align-content: start;
    }

    .station-tab {
      display: contents;
    }

    .station-tab.hidden {
      display: none;
    }

    .station-card-aero {
      background: linear-gradient(145deg, rgba(255, 255, 255, 0.04) 0%, rgba(255, 255, 255, 0.01) 100%);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-top: 1px solid rgba(255, 255, 255, 0.2);
      border-radius: 8px;
      padding: 12px;
      display: flex;
      flex-direction: column;
      gap: 6px;
      transition: transform 0.2s, border-color 0.2s;
    }

    .station-card-aero:hover {
      transform: translateY(-1px);
      border-color: rgba(255, 255, 255, 0.25);
      background: linear-gradient(145deg, rgba(255, 255, 255, 0.07) 0%, rgba(255, 255, 255, 0.02) 100%);
    }

    .card-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
    }

    .card-title {
      font-size: 13px;
      font-weight: 700;
      color: #f1f5f9;
    }

    .card-badge {
      font-size: 9px;
      background: rgba(96, 165, 250, 0.2);
      color: #93c5fd;
      padding: 2px 4px;
      border-radius: 4px;
      border: 1px solid rgba(96, 165, 250, 0.3);
      text-transform: uppercase;
    }

    .card-desc {
      font-size: 11px;
      color: #94a3b8;
      line-height: 1.3;
    }

    .card-actions {
      margin-top: 6px;
      padding-top: 8px;
      border-top: 1px solid rgba(255, 255, 255, 0.08);
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 8px;
    }

    .card-price {
      font-family: 'Consolas', monospace;
      font-weight: 700;
      color: #fbbf24;
      font-size: 12px;
    }

    .station-card-aero button {
      padding: 6px 10px;
      border-radius: 6px;
      border: 1px solid rgba(148, 163, 184, 0.35);
      background: rgba(15, 23, 42, 0.75);
      color: #e2e8f0;
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 1px;
      cursor: pointer;
      transition: all 0.2s;
    }

    .station-card-aero button:hover:not(:disabled) {
      border-color: rgba(96, 165, 250, 0.65);
      color: #fff;
      background: rgba(30, 64, 175, 0.35);
    }

    .station-card-aero button:disabled {
      opacity: 0.4;
      cursor: default;
    }

    .trade-resource-card .card-desc {
      margin-top: -4px;
    }

    /* Hide Original UI */
    #ui,
    #side-panels,
    #hud-topbar,
    #station-overlay,
    #infrastructure-overlay {
      display: none !important;
    }
